(function(e){function t(t){for(var a,n,o=t[0],u=t[1],c=t[2],d=0,h=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&h.push(i[n][0]),i[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var u=s[o];0!==i[u]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={app:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="weather-app.v2/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0e0a":function(e,t,s){},"16b0":function(e,t,s){},"2da5":function(e,t,s){"use strict";var a=s("34e7"),i=s.n(a);i.a},"34e7":function(e,t,s){},"47f2":function(e,t,s){"use strict";var a=s("601b"),i=s.n(a);i.a},"496e":function(e,t,s){"use strict";var a=s("fa3f"),i=s.n(a);i.a},"4dc5":function(e,t,s){e.exports=s.p+"img/star.fed6d4ef.png"},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=s("8c4f"),r=s("f3e7"),n=s("a925"),o={auth:{hello:"Привет! Что бы узнать погоду, вы должны быть авторизованы. Пожалуйста зарегестрируйтесь либо войдите в свой аккаунт, чтобы использовать Weather-app.v2",signIn:"Войти",register:"Зарегистрироваться"},signIn:{emailEnter:"Пожалуйста введите свой электронный адрес:",emailError:"Электронный адрес введен неправильно",emailPlaceholder:"чтонибудь@вашдомен.com",emailEmpty:"Поле для ввода электронного адреса не заполнено",passwordEnter:"Пожалуйста введите свой пароль:",passwordError:"Введнный пароль содержит менее шести символов",passwordPlaceholder:"Не менее шести(6) символов",passwordEmpty:"Поле для ввода пароля не заполнено",userUnauthorised:"Вход не удался. Причина: ",signIn:"Войти"},register:{emailEnter:"Пожалуйста введите свой электронный адрес:",emailError:"Электронный адрес введен неправильно",emailPlaceholder:"чтонибудь@вашдомен.com",emailEmpty:"Поле для ввода электронного адреса не заполнено",passwordEnter:"Пожалуйста введите свой пароль:",passwordError:"Введнный пароль содержит менее шести символов",passwordPlaceholder:"Не менее шести(6) символов",passwordEmpty:"Поле для ввода пароля не заполнено",showAdditionalParams:"Показать дополнгительные поля",hideAdditionalParams:"Спрятать дополнительные поля",additionalParamsError:"Разрешены только буквы",firstName:"Имя",city:"Город",country:"Страна",birthDate:"Дата рождения",birthDateError:"Введена неверная дата",register:"Зарегестрироваться",registerFailed:"Регистрация не удалась. Причина: "},changeUserWindow:{youSignedInAs:"Вы вошли как: ",home:"Главная",profile:"Профиль",signOut:"Выйти",signOutFailed:"Выйти не удалось"},dataInput:{enterCity:"Привет {userName}! Пожалуйста введите свой город",enterCityNoUser:"Пожалуйста введите свой город",chooseWeatherService:"Выберите сервис для предоставления прогноза:"},showWeather:{showForecast:"Показать прогноз",cityIncorrect:"Название города не введено, либо такого города не существует",resultsFromCache:"Результаты показаны из Кэш памяти. Такой же запрос бы сделан менее 2х часов назад",country:"Страна",weatherCondition:"Погодные условия",temperature:"Температура",feelsLike:"Ощущается как",humidity:"Влажность",windSpeed:"Скорость ветра"},profile:{userInfo:"Пользовательская информация:",userInfoError:"Простите, не найдено никакой информации о пользователе",prompt:"Для изменения пользовательских данных просто нажмите на те данные которые хотите изменить!",userAge:"Пользователю на данный момент {age} лет"},asideMenu:{today:"Сегодня",tomorrow:"Завтра",threeDays:"3 дня",sevenDays:"7 дней",signOut:"Выйти",profile:"Профиль",goods:"Товары"}},u=o,c={auth:{hello:"Hello! To see the weather you must be authorised. Please register or sign in to use Weather-app.v2",signIn:"Sign In",register:"Register"},signIn:{emailEnter:"Please type your email here:",emailError:"Entered email is not valid",emailPlaceholder:"smth@youremailservice.com",emailEmpty:"Login field is empty",passwordEnter:"Please type your password here:",passwordError:"Your password is less then 6 symbols",passwordPlaceholder:"Six(6) symbols at least",passwordEmpty:"Password field is empty",userUnauthorised:"Signing in si failed. Because: ",signIn:"Sign In"},register:{emailEnter:"Please type your email here:",emailError:"Entered email is not valid",emailPlaceholder:"smth@youremailservice.com",emailEmpty:"Login field is empty",passwordEnter:"Please type your password here:",passwordError:"Your password is less then 6 symbols",passwordPlaceholder:"Six(6) symbols at least",passwordEmpty:"Password field is empty",showAdditionalParams:"Show additional fields",hideAdditionalParams:"Hide additional fields",additionalParamsError:"Only letters allowed",firstName:"First Name",city:"City",country:"Country",birthDate:"Birth Date",birthDateError:"Invalid date entered",register:"Register",registerFailed:"Registration Failed. Because: "},changeUserWindow:{youSignedInAs:" You are signed in as: ",home:"Home",profile:"Profile",signOut:"SignOut",signOutFailed:"Sign out failed"},dataInput:{enterCity:"Hi {userName}! Please enter your city",enterCityNoUser:"Please enter your city",chooseWeatherService:"Please choose weather service:"},showWeather:{showForecast:"Show Forecast",cityIncorrect:"There is no city name entered or city name incorrect",resultsFromCache:"Results shown from cache. Same request was made less than 2 hours ago",country:"Country",weatherCondition:"Weather Condition",temperature:"Temperature",feelsLike:"Feels Like",humidity:"Humidity",windSpeed:"Wind Speed"},profile:{userInfo:"User Info:",userInfoError:"Sorry, no user information provided",prompt:"To change User data just click on it!",userAge:"User now is {age} years old"},asideMenu:{today:"Today",tomorrow:"Tomorrow",threeDays:"3 Days",sevenDays:"7 Days",signOut:"SignOut",profile:"Profile",goods:"Goods"}},l=c,d={en:l,ru:u},h=d,m={en:{year:"numeric",month:"short",day:"numeric",userAge:{year:"numeric"}},ru:{year:"numeric",month:"short",day:"numeric",userAge:{year:"numeric"}}},g=m,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-view")},f=[],v={name:"App"},w=v,_=s("2877"),y=Object(_["a"])(w,p,f,!1,null,null,null),C=y.exports,b=(s("7db0"),s("b0c0"),s("d3b7"),s("2f62")),$=s("8aa50"),I=s.n($),S={apiKey:"AIzaSyBWUO9Z7ZVDUC4xX7_QPQIp4KJnjqQ-Rno",authDomain:"weather-app-v2-962a1.firebaseapp.com",databaseURL:"https://weather-app-v2-962a1.firebaseio.com",projectId:"weather-app-v2-962a1",storageBucket:"weather-app-v2-962a1.appspot.com",messagingSenderId:"250942331411",appId:"1:250942331411:web:376e22413eb8a58a587de6",measurementId:"G-FTB7JPHQKR"},P=I.a.initializeApp(S),O=P,A=s("bc3a"),x=s.n(A);a["a"].use(b["a"]);var E=new b["a"].Store({state:{user:null,userAdditionalInfo:null,city:"Minsk",weatherService:"openWeather",goods:null},getters:{userName:function(e){return e.userAdditionalInfo?e.userAdditionalInfo.name:null},userBirthDate:function(e){return e.userAdditionalInfo?e.userAdditionalInfo.birthDate:null},userAge:function(e){return e.userAdditionalInfo?new Date-new Date(e.userAdditionalInfo.birthDate):null},getGoodById:function(e){return function(t){return e.goods?e.goods.find((function(e){return e._id.$oid===t})):null}}},mutations:{saveAuthenticatedUser:function(e,t){this.state.user=t},saveUserAdditionalInfo:function(e,t){this.state.userAdditionalInfo=t},changeCityName:function(e,t){this.state.city=t},changeWeatherService:function(e,t){this.state.weatherService=t},saveGoods:function(e,t){this.state.goods=t}},actions:{signInUser:function(e,t){return new Promise((function(s,a){O.auth().signInWithEmailAndPassword(t.login,t.password).then((function(t){e.commit("saveAuthenticatedUser",t.user),e.dispatch("getUserAdditionalInfo").then((function(){return s(t.user)}))}),(function(e){a(e)}))}))},signOut:function(e){return new Promise((function(t,s){O.auth().signOut().then((function(){e.commit("saveAuthenticatedUser",null),t()}),(function(e){s(e)}))}))},checkAuthentication:function(e){return new Promise((function(t){O.auth().onAuthStateChanged((function(s){e.commit("saveAuthenticatedUser",s),t(s)}))}))},registerNewUser:function(e,t){return new Promise((function(s,a){O.auth().createUserWithEmailAndPassword(t.login,t.password).then((function(a){e.commit("saveAuthenticatedUser",a.user),t.additionalInfo&&(t.uid=a.user.uid,E.dispatch("loadUserAdditionalInfo",t)),s()}),(function(e){a(e)}))}))},getUserAdditionalInfo:function(e){O.database().ref("users/"+this.state.user.uid).on("value",(function(t){e.commit("saveUserAdditionalInfo",t.val())}))},loadUserAdditionalInfo:function(e,t){O.database().ref("users/"+t.uid).set({name:t.additionalInfo.name,city:t.additionalInfo.city,country:t.additionalInfo.country,birthDate:t.additionalInfo.birthDate}).then((function(){return e.commit("saveUserAdditionalInfo",t.additionalInfo)}))},changeUserData:function(e,t){return new Promise((function(s,a){O.database().ref("users/"+E.state.user.uid).child("".concat(t.property)).set("".concat(t.value)).then((function(){e.dispatch("getUserAdditionalInfo").then((function(){return s()}))})).catch((function(e){a(e)}))}))},getGoods:function(e){return new Promise((function(t,s){O.storage().ref("data.json").getDownloadURL().then((function(e){return x.a.get(e)})).then((function(t){return e.commit("saveGoods",t.data)})).then((function(e){return t(e)})).catch((function(e){return s(e)}))}))}}}),k=E,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"authentication"},[s("div",{staticClass:"authorization-choice"},[s("h3",{staticClass:"date"},[e._v(e._s(e.$d(new Date)))]),s("h1",{staticClass:"headline"},[e._v(e._s(e.$t("auth.hello")))]),s("router-link",{staticClass:"button",attrs:{to:"/signIn",replace:""}},[e._v(e._s(e.$t("auth.signIn")))]),s("router-link",{staticClass:"button",attrs:{to:"/register",replace:""}},[e._v(e._s(e.$t("auth.register")))])],1),s("language-change"),s("router-view")],1)},L=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"languageMenu hidden",attrs:{id:"language-menu"}},[s("div",{staticClass:"languages"},[s("h1",{staticClass:"headline"},[e._v("Change Language:")]),s("button",{staticClass:"language button",on:{click:e.changeLanguage}},[e._v("En")]),s("button",{staticClass:"language button",on:{click:e.changeLanguage}},[e._v("Ru")])]),s("button",{staticClass:"show-hide button",on:{click:e.showHideLanguages}})])},D=[],U={name:"LanguageChange",created:function(){navigator.languages[0].substr(0,2)===!this.$i18n.locale&&(this.languageMenuHidden=!1)},data:function(){return{languageMenuHidden:!0}},methods:{changeLanguage:function(){this.$i18n.locale="".concat(event.currentTarget.innerText.toLowerCase())},showHideLanguages:function(){this.languageMenuHidden?(document.getElementById("language-menu").classList.remove("hidden"),this.languageMenuHidden=!1):(document.getElementById("language-menu").classList.add("hidden"),this.languageMenuHidden=!0)}}},j=U,T=(s("2da5"),Object(_["a"])(j,N,D,!1,null,null,null)),B=T.exports,F={name:"Authentication",components:{LanguageChange:B}},M=F,R=(s("98b0"),Object(_["a"])(M,W,L,!1,null,null,null)),q=R.exports,G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ChangeUserWindow"),s("Aside-menu"),s("router-view")],1)},H=[],z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"header"},[s("h3",{staticClass:"date"},[e._v(e._s(e.$d(new Date)))]),s("div",{staticClass:"user"},[null!==this.$store.state.user?s("h1",{staticClass:"user-name"},[e._v(e._s(e.$t("changeUserWindow.youSignedInAs"))+e._s(this.$store.state.user.email))]):e._e()]),s("language-change"),this.errorText?s("h1",{staticClass:"error"},[e._v(e._s(this.errorText))]):e._e()],1)},J=[],K={name:"ChangeUserWindow",components:{LanguageChange:B},data:function(){return{errorText:""}},methods:{signOut:function(){var e=this;this.$store.dispatch("signOut").then((function(){e.$router.push("/auth")})).catch((function(t){e.errorText=e.$t("changeUserWindow.signOutFailed")+t.message}))}}},Q=K,V=(s("6caa"),Object(_["a"])(Q,z,J,!1,null,null,null)),Y=V.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("aside",{staticClass:"aside-menu hidden",attrs:{id:"aside-menu"}},[s("ul",{staticClass:"list"},[s("li",{staticClass:"item selected",on:{click:function(t){return e.addSelected("/weatherToday")}}},[e._v(e._s(e.$t("asideMenu.today")))]),s("li",{staticClass:"item",on:{click:function(t){return e.addSelected("/")}}},[e._v(e._s(e.$t("asideMenu.tomorrow")))]),s("li",{staticClass:"item",on:{click:function(t){return e.addSelected("/")}}},[e._v(e._s(e.$t("asideMenu.threeDays")))]),s("li",{staticClass:"item",on:{click:function(t){return e.addSelected("/")}}},[e._v(e._s(e.$t("asideMenu.sevenDays")))]),s("li",{staticClass:"item",on:{click:function(t){return e.addSelected("/profile")}}},[e._v(e._s(e.$t("asideMenu.profile")))]),s("li",{staticClass:"item",on:{click:function(t){return e.addSelected("/goodsList")}}},[e._v(e._s(e.$t("asideMenu.goods")))]),s("li",{staticClass:"item",on:{click:e.signOut}},[e._v(e._s(e.$t("asideMenu.signOut")))])]),s("button",{staticClass:"show-hide",on:{click:e.showHideAsideMenu}})])},X=[],ee={name:"AsideMenu",methods:{addSelected:function(e){document.querySelector(".selected")&&document.querySelector(".selected").classList.remove("selected"),event.target.classList.add("selected"),this.$router.currentRoute.path===e||this.$router.push({path:e})},showHideAsideMenu:function(){var e=document.getElementById("aside-menu");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")},signOut:function(){var e=this;this.$store.dispatch("signOut").then((function(){e.$router.push("/auth")})).catch((function(t){e.errorText=e.$t("changeUserWindow.signOutFailed")+t.message}))}}},te=ee,se=(s("496e"),Object(_["a"])(te,Z,X,!1,null,null,null)),ae=se.exports,ie={name:"Home",components:{AsideMenu:ae,ChangeUserWindow:Y}},re=ie,ne=Object(_["a"])(re,G,H,!1,null,null,null),oe=ne.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"inputs"},[s("label",{staticClass:"label",attrs:{for:"login-input"}},[e._v(e._s(e.$t("signIn.emailEnter")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"input-field",attrs:{type:"text",id:"login-input",placeholder:e.$t("signIn.emailPlaceholder")},domProps:{value:e.login},on:{blur:this.$v.login.$touch,input:function(t){t.target.composing||(e.login=t.target.value)}}}),this.$v.login.$error?s("h1",{staticClass:"input error"},[e._v(e._s(e.$t("signIn.emailError")))]):e._e(),s("label",{staticClass:"label",attrs:{for:"password-input"}},[e._v(e._s(e.$t("signIn.passwordEnter")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-field",attrs:{type:"password",id:"password-input",placeholder:e.$t("signIn.passwordPlaceholder")},domProps:{value:e.password},on:{blur:this.$v.password.$touch,input:function(t){t.target.composing||(e.password=t.target.value)}}}),this.$v.password.$error?s("h1",{staticClass:"input error"},[e._v(e._s(e.$t("signIn.passwordError")))]):e._e(),this.errorText?s("h1",{staticClass:"user-info error"},[e._v(e._s(this.errorText))]):e._e()]),this.$store.state.user?e._e():s("input",{staticClass:"button",attrs:{type:"submit"},domProps:{value:e.$t("signIn.signIn")},on:{click:e.signInUser}})])},ce=[],le=s("b5ae"),de={name:"SignIn",data:function(){return{login:"",password:"",errorText:""}},validations:{login:{required:le["required"],email:le["email"]},password:{required:le["required"],minLength:Object(le["minLength"])(6)}},methods:{signInUser:function(){var e=this;this.$v.login.$invalid||this.$v.password.$invalid?(""===this.password&&(this.errorText=this.$t("signIn.passwordEmpty")),""===this.login&&(this.errorText=this.$t("signIn.emailEmpty"))):this.$store.dispatch({type:"signInUser",login:this.login,password:this.password}).then((function(){e.errorText="",e.$router.push("/")})).catch((function(t){e.errorText=e.$t("signIn.userUnauthorised")+t.message}))}}},he=de,me=Object(_["a"])(he,ue,ce,!1,null,null,null),ge=me.exports,pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"registration"},[s("form",{staticClass:"register-form",on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"inputs"},[s("label",{staticClass:"label",attrs:{for:"login-input"}},[e._v(e._s(e.$t("register.emailEnter")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"input-field",attrs:{type:"text",id:"login-input",placeholder:e.$t("register.emailPlaceholder")},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),this.$v.login.$error?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.emailError")))]):e._e(),s("label",{staticClass:"label",attrs:{for:"password-input"}},[e._v(e._s(e.$t("register.passwordEnter")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-field",attrs:{type:"password",id:"password-input",placeholder:e.$t("register.passwordPlaceholder")},domProps:{value:e.password},on:{blur:this.$v.password.$touch,input:function(t){t.target.composing||(e.password=t.target.value)}}}),this.$v.password.$error?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.passwordError")))]):e._e(),this.errorText?s("h1",{staticClass:"user-info error"},[e._v(e._s(e.$t("register.passwordError")))]):e._e()]),e.showAdditionalParams?e._e():s("button",{staticClass:"button",on:{click:function(t){e.showAdditionalParams=!0}}},[e._v(e._s(e.$t("register.showAdditionalParams")))]),e.showAdditionalParams?s("div",{staticClass:"inputs additional"},[s("label",{staticClass:"label",attrs:{for:"user-first-name"}},[e._v(e._s(e.$t("register.firstName")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"input-field",attrs:{id:"user-first-name",type:"text"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),this.$v.userName.$invalid?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.additionalParamsError")))]):e._e(),s("label",{staticClass:"label",attrs:{for:"user-city"}},[e._v(e._s(e.$t("register.city")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userCity,expression:"userCity"}],staticClass:"input-field",attrs:{id:"user-city",type:"text"},domProps:{value:e.userCity},on:{input:function(t){t.target.composing||(e.userCity=t.target.value)}}}),this.$v.userCity.$invalid?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.additionalParamsError")))]):e._e(),s("label",{staticClass:"label",attrs:{for:"user-country"}},[e._v(e._s(e.$t("register.country")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userCountry,expression:"userCountry"}],staticClass:"input-field",attrs:{id:"user-country",type:"text"},domProps:{value:e.userCountry},on:{input:function(t){t.target.composing||(e.userCountry=t.target.value)}}}),this.$v.userCountry.$invalid?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.additionalParamsError")))]):e._e(),s("label",{staticClass:"label",attrs:{for:"user-birth-date"}},[e._v(e._s(e.$t("register.birthDate")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userBirthDate,expression:"userBirthDate"}],staticClass:"input-field",attrs:{id:"user-birth-date",type:"date"},domProps:{value:e.userBirthDate},on:{input:[function(t){t.target.composing||(e.userBirthDate=t.target.value)},this.$v.userBirthDate.$touch]}}),this.$v.userBirthDate.$error?s("p",{staticClass:"input error"},[e._v(e._s(e.$t("register.birthDateError")))]):e._e(),s("button",{staticClass:"button",on:{click:function(t){e.showAdditionalParams=!1}}},[e._v(e._s(e.$t("register.hideAdditionalParams")))])]):e._e(),this.$store.state.user?e._e():s("input",{staticClass:"button",attrs:{type:"submit"},domProps:{value:e.$t("register.register")},on:{click:e.registerNewUser}})])])},fe=[],ve=(s("ac1f"),s("466d"),function(e){return"undefined"===typeof e||null===e||""===e||!!e.match(/^[^!-@]*$/)}),we=function(e){return"undefined"===typeof e||null===e||""===e||!!e.match(/^[^!-@\s]*$/)},_e=function(e,t){return"undefined"===typeof e||null===e||""===e||new Date("'".concat(e,"'"))>new Date(t)},ye=function(e,t){return"undefined"===typeof e||null===e||""===e||new Date("'".concat(e,"'"))<new Date(Date.now()-t)},Ce=946728e5,be="http://api.openweathermap.org/",$e="data/2.5/weather?q=",Ie="&APPID=1d5b2747b9b459a833cca4a6207e9467",Se="https://api.weatherbit.io/",Pe="v2.0/current?city=",Oe="&key=0d3fd477f5b24855b51d98148f284919",Ae={name:"Register",data:function(){return{login:"",password:"",userName:null,userCity:null,userCountry:null,userBirthDate:null,errorText:"",showAdditionalParams:!1}},validations:{login:{required:le["required"],email:le["email"]},password:{required:le["required"],minLength:Object(le["minLength"])(6)},userName:{nonNumericOneWord:we,maxLength:Object(le["maxLength"])(25)},userCity:{nonNumeric:ve,maxLength:Object(le["maxLength"])(25)},userCountry:{nonNumeric:ve,maxLength:Object(le["maxLength"])(25)},userBirthDate:{minDate:function(e){return _e(e,"1920-01-01")},maxDate:function(e){return ye(e,Ce)}}},methods:{registerNewUser:function(){var e=this;this.$v.login.$invalid||this.$v.password.$invalid?(""===this.password&&(this.errorText=this.$t("register.passwordEmpty")),""===this.login&&(this.errorText=this.$t("register.emailEmpty"))):this.$store.dispatch({type:"registerNewUser",login:this.login,password:this.password,additionalInfo:{name:this.userName,city:this.userCity,country:this.userCountry,birthDate:this.userBirthDate}}).then((function(){e.errorText="",e.$router.push("/")})).catch((function(t){e.errorText=e.$t("register.registerFailed")+t.message}))}}},xe=Ae,Ee=Object(_["a"])(xe,pe,fe,!1,null,null,null),ke=Ee.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"user-info",attrs:{id:"user-info"}},[s("h1",{staticClass:"table-header headline"},[e._v(e._s(e.$t("profile.userInfo")))]),s("table",{staticClass:"data-table",attrs:{id:"data-table"}},e._l(e.$store.state.userAdditionalInfo,(function(t,a,i){return s("tr",{key:i,staticClass:"data-list"},[s("td",[e._v(e._s(a)+" :")]),s("td",{on:{click:e.changeFieldValue}},[e._v(" "+e._s(t))])])})),0),null===e.$store.state.userAdditionalInfo?s("h1",[e._v(e._s(e.$t("profile.userInfoError")))]):e._e()]),e.$store.state.userAdditionalInfo?s("h2",{staticClass:"headline"},[e._v(e._s(e.$t("profile.userAge",{age:e.$d(e.$store.getters.userAge,"userAge")-1970})))]):e._e(),s("h3",{staticClass:"headline"},[e._v(e._s(e.$t("profile.prompt")))])])},Le=[],Ne=(s("5319"),{name:"Profile",data:function(){return{infoIsChanging:!1}},methods:{changeFieldValue:function(){var e=this;if(!1===this.infoIsChanging){this.infoIsChanging=!0;var t=event.currentTarget.previousSibling.innerText;t=t.replace(/ :/g,""),t=t.replace(/^[A-Z]/g,(function(e){return e.toLowerCase()}));var s=document.createElement("input");s.classList.add("input-field","temporary"),s.value=event.currentTarget.innerText,s.maxLength=25,event.currentTarget.append(s),s.focus();var a=function(){e.$store.dispatch("changeUserData",{property:t,value:s.value}),s.remove(),e.infoIsChanging=!1};s.addEventListener("blur",a)}}}}),De=Ne,Ue=(s("b3d7"),Object(_["a"])(De,We,Le,!1,null,null,null)),je=Ue.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("DataInput"),s("ShowWeather")],1)},Be=[],Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"show-weather"},[s("input",{staticClass:"submit-button button",attrs:{type:"submit"},domProps:{value:e.$t("showWeather.showForecast")},on:{click:e.showForecast}}),e.error?s("h1",{staticClass:"error"},[e._v(e._s(e.$t("showWeather.cityIncorrect")))]):e._e(),e.dataArrived&&!e.error?s("div",{staticClass:"results"},[s("h1",{staticClass:"city-name"},[e._v(e._s(this.city))]),e._l(e.results,(function(t,a,i){return s("h2",{key:i,staticClass:"info-line"},[e._v(e._s(a)+" : "+e._s(t))])})),e.resultsFromCache?s("h3",{staticClass:"cache-info"},[e._v(e._s(e.$t("showWeather.resultsFromCache")))]):e._e()],2):e._e()])},Me=[],Re=(s("a4d3"),s("e01a"),s("ade3")),qe={name:"ShowWeather",data:function(){return{results:{},dataArrived:!1,timeStamp:void 0,error:!1,usedService:null,resultsFromCache:!1}},methods:{showOpenWeatherForecast:function(){var e=this;if(this.checkResultsInCache())this.showResultsFromCache();else{this.resultsFromCache=!1;var t=be+$e+"".concat(this.city)+Ie;fetch(t).then((function(t){204===t.status||404===t.status?e.error=!0:t.json().then((function(t){var s,a=(s={},Object(Re["a"])(s,e.$t("showWeather.country"),t.sys.country),Object(Re["a"])(s,e.$t("showWeather.weatherCondition"),t.weather[0].main),Object(Re["a"])(s,e.$t("showWeather.temperature"),e.convertKalvinToCelsius(t.main.temp)),Object(Re["a"])(s,e.$t("showWeather.feelsLike"),e.convertKalvinToCelsius(t.main.feels_like)),Object(Re["a"])(s,e.$t("showWeather.humidity"),t.main.humidity+" %"),Object(Re["a"])(s,e.$t("showWeather.windSpeed"),t.wind.speed+" m/s"),s);e.results=a,e.dataArrived=!0,e.saveResultsInCache(a)}))}))}},showWeatherBitForecast:function(){var e=this;if(this.checkResultsInCache())this.showResultsFromCache();else{this.resultsFromCache=!1;var t=Se+Pe+"".concat(this.city)+Oe;fetch(t).then((function(t){204===t.status||404===t.status?e.error=!0:t.json().then((function(t){var s,a=(s={},Object(Re["a"])(s,e.$t("showWeather.country"),t.data[0].country_code),Object(Re["a"])(s,e.$t("showWeather.weatherCondition"),t.data[0].weather.description),Object(Re["a"])(s,e.$t("showWeather.temperature"),Math.round(t.data[0].temp)+String.fromCharCode(176)+" C"),Object(Re["a"])(s,e.$t("showWeather.feelsLike"),Math.round(t.data[0].app_temp)+String.fromCharCode(176)+" C"),Object(Re["a"])(s,e.$t("showWeather.humidity"),t.data[0].rh+" %"),Object(Re["a"])(s,e.$t("showWeather.windSpeed"),Math.round(t.data[0].wind_spd)+" m/s"),s);e.results=a,e.dataArrived=!0,e.checkResultsInCache()||e.saveResultsInCache(a)}))}))}},showForecast:function(){""!==this.city?(this.error=!1,this.timeStamp=Date.now(),"openWeather"===this.weatherService?(this.usedService="Open Weather",this.showOpenWeatherForecast()):(this.usedService="Weather Bit",this.showWeatherBitForecast())):this.error=!0},convertKalvinToCelsius:function(e){return Math.floor(e-273.15)+String.fromCharCode(176)+" C"},checkResultsInCache:function(){return void 0!==localStorage.city&&(localStorage.city===this.city&&localStorage.usedService===this.usedService&&localStorage.timeStamp-this.timeStamp<36e5&&localStorage.lang===this.$i18n.locale)},saveResultsInCache:function(e){console.log("Записаны новые данные"),localStorage.forecast=JSON.stringify(e),localStorage.usedService=this.usedService,localStorage.timeStamp=this.timeStamp,localStorage.city=this.city,localStorage.lang=this.$i18n.locale},showResultsFromCache:function(){this.dataArrived=!0,this.results=JSON.parse(localStorage.forecast),this.resultsFromCache=!0}},computed:{city:function(){return this.$store.state.city},weatherService:function(){return this.$store.state.weatherService}}},Ge=qe,He=(s("47f2"),Object(_["a"])(Ge,Fe,Me,!1,null,null,null)),ze=He.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"inputs"},[null===e.$store.state.userAdditionalInfo?s("h1",{staticClass:"input-header headline"},[e._v(e._s(e.$t("dataInput.enterCityNoUser")))]):e._e(),e.$store.state.userAdditionalInfo?s("h1",{staticClass:"input-header headline"},[e._v(e._s(e.$t("dataInput.enterCity",{userName:e.$store.getters.userName})))]):e._e(),s("input",{staticClass:"input-field",attrs:{id:"city-input-field",type:"text"},domProps:{value:e.$store.state.city},on:{change:e.changeCityName}}),s("h1",{staticClass:"service-headline headline"},[e._v(e._s(e.$t("dataInput.chooseWeatherService")))]),s("div",{staticClass:"service-choice"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.weatherServiceName,expression:"weatherServiceName"}],attrs:{type:"radio",name:"serviceName",id:"openWeather",value:"openWeather"},domProps:{checked:e._q(e.weatherServiceName,"openWeather")},on:{change:[function(t){e.weatherServiceName="openWeather"},e.changeWeatherService]}}),s("label",{staticClass:"checkbox-label button",attrs:{for:"openWeather"},on:{click:e.changeWeatherService}},[e._v("Open Weather")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.weatherServiceName,expression:"weatherServiceName"}],attrs:{type:"radio",name:"serviceName",id:"weatherBit",value:"weatherBit"},domProps:{checked:e._q(e.weatherServiceName,"weatherBit")},on:{change:[function(t){e.weatherServiceName="weatherBit"},e.changeWeatherService]}}),s("label",{staticClass:"checkbox-label button",attrs:{for:"weatherBit"},on:{click:e.changeWeatherService}},[e._v("Weather Bit")])])])},Ke=[],Qe={name:"DataInput",data:function(){return{weatherServiceName:"openWeather"}},methods:{changeCityName:function(){this.$store.commit("changeCityName",document.getElementById("city-input-field").value)},changeWeatherService:function(){this.$store.commit("changeWeatherService",this.weatherServiceName)}}},Ve=Qe,Ye=(s("d89d"),Object(_["a"])(Ve,Je,Ke,!1,null,null,null)),Ze=Ye.exports,Xe={name:"WeatherToday",components:{ShowWeather:ze,DataInput:Ze}},et=Xe,tt=Object(_["a"])(et,Te,Be,!1,null,"5d196c88",null),st=tt.exports,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[this.goodsOnPage?a("div",{staticClass:"goodsList"},e._l(this.goodsOnPage,(function(t){return a("div",{key:t._id.$oid,staticClass:"good",on:{click:function(s){return e.showCurrentGood(t._id.$oid)}}},[a("div",{staticClass:"images"},[a("img",{attrs:{width:"300",height:"180",src:t.images[0]}})]),a("h1",{staticClass:"headline"},[e._v(e._s(t.title))]),a("div",{staticClass:"imageProperties"},[a("div",{staticClass:"properties"},[a("div",{staticClass:"sizes"},[a("h1",{staticClass:"headline"},[e._v("Available sizes:")]),a("div",{staticClass:"sizesAvailable"},e._l(t.size,(function(s,i){return a("h2",{key:t._id.$oid+"sizes"+i,staticClass:"size"},[e._v(" "+e._s(s))])})),0)]),a("h2",{staticClass:"price"},[e._v("Price : "+e._s(t.price)+"$")]),t.rating?a("div",{staticClass:"rating"},[a("h1",{staticClass:"headline"},[e._v("Rating:")]),e._l(Math.round(t.rating),(function(e){return a("img",{key:t._id.$oid+"rating"+e,attrs:{src:s("4dc5"),width:"30",height:"30"}})}))],2):e._e()])])])})),0):e._e(),e.goods?a("div",{ref:"pagesList",staticClass:"pagesList",attrs:{id:"pagesList"}},e._l(e.amountOfPages,(function(t){return a("p",{key:"page"+t,staticClass:"page",on:{click:e.changePage}},[e._v(e._s(t))])})),0):e._e()])},it=[],rt=(s("fb6a"),s("5530")),nt={name:"GoodsList",created:function(){this.$store.dispatch("getGoods")},updated:function(){1===this.currentPage&&this.$refs.pagesList.children[this.currentPage-1].classList.add("selected")},data:function(){return{amountOfGoodsOnPage:9,currentPage:1}},computed:Object(rt["a"])({goodsOnPage:function(){return this.goods?this.goods.slice((this.currentPage-1)*this.amountOfGoodsOnPage,this.amountOfGoodsOnPage*this.currentPage):null},amountOfPages:function(){return Math.ceil(this.goods.length/this.amountOfGoodsOnPage)}},Object(b["b"])({goods:function(e){return e.goods}})),methods:{changePage:function(){this.$refs.pagesList.children[this.currentPage-1].classList.remove("selected"),this.currentPage=event.target.innerText,this.$refs.pagesList.children[this.currentPage-1].classList.add("selected")},showCurrentGood:function(e){this.$router.push("/good/".concat(e))}}},ot=nt,ut=(s("71a9"),Object(_["a"])(ot,at,it,!1,null,null,null)),ct=ut.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.good?a("div",{staticClass:"goodDetails"},[a("h1",{staticClass:"headline goodName"},[e._v(e._s(e.good.title))]),a("div",{staticClass:"images"},[a("img",{staticClass:"mainImage",attrs:{src:e.good.images[0]}}),a("div",{staticClass:"imagesPreview"},e._l(e.good.images,(function(t,s){return a("img",{key:e.good._id.$oid+"image"+s,staticClass:"image",attrs:{src:t},on:{click:e.choseImage}})})),0)]),a("div",{staticClass:"properties"},[a("div",{staticClass:"sizes"},[a("h1",{staticClass:"headline"},[e._v("Available sizes:")]),a("div",{staticClass:"sizesAvailable"},e._l(e.good.size,(function(t,s){return a("h2",{key:e.good._id.$oid+"sizes"+s,staticClass:"size"},[e._v(e._s(t))])})),0)]),a("h2",{staticClass:"price"},[e._v("Price : "+e._s(e.good.price)+"$")]),e.good.rating?a("div",{staticClass:"rating"},[a("h1",{staticClass:"headline"},[e._v("Rating:")]),e._l(Math.round(e.good.rating),(function(t){return a("img",{key:e.good._id.$oid+"rating"+t,attrs:{src:s("4dc5"),width:"30",height:"30"}})}))],2):e._e(),a("div",{staticClass:"tags"},[a("h1",{staticClass:"headline"},[e._v("Tags:")]),e._l(e.good.tags,(function(t,s){return a("h1",{key:e.good._id.$oid+"tag"+s,staticClass:"tag"},[e._v(e._s(t))])}))],2),a("div",{staticClass:"availableColors"},[a("h1",{staticClass:"headline"},[e._v("Available colors:")]),e._l(e.good.color,(function(t,s){return a("div",{key:e.good._id.$oid+"color"+s,staticClass:"color",style:{backgroundColor:t}},[e._v(e._s(t))])}))],2)]),a("div",{staticClass:"descriptionBlock"},[a("h1",{staticClass:"headline"},[e._v("Description:")]),a("p",{staticClass:"description"},[e._v(e._s(e.good.description))])]),a("button",{staticClass:"button",on:{click:function(t){return e.$router.go(-1)}}},[e._v("Back to the Good List")])]):e._e(),void 0===e.good?a("div",[a("img",{attrs:{src:s("6cd6"),width:"220px",alt:"John Travolta ic confused"}}),a("h1",{staticClass:"headline"},[e._v("Sorry! Selected good wasn't found!")]),a("button",{staticClass:"button",on:{click:function(t){return e.$router.push({path:"/goodsList"})}}},[e._v("Back to the Good List")])]):e._e()])},dt=[],ht={name:"Good",created:function(){this.$store.dispatch("getGoods")},computed:{good:function(){return this.$store.getters.getGoodById(this.$route.params.id)}},methods:{choseImage:function(){console.log(event.target)}}},mt=ht,gt=(s("e476"),Object(_["a"])(mt,lt,dt,!1,null,null,null)),pt=gt.exports,ft=[{path:"/",name:"home",redirect:"/weatherToday",component:oe,meta:{requiresAuth:!0},children:[{path:"/weatherToday",name:"Weather Today",component:st,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:je,meta:{requiresAuth:!0}},{path:"/goodsList",name:"GoodsList",component:ct,meta:{requiresAuth:!0}},{path:"/good/:id",name:"Good",component:pt,meta:{requiresAuth:!0}}]},{path:"/auth",name:"auth",component:q,meta:{userMustBeUnauthenticated:!0},children:[{path:"/signIn",name:"SignIn",component:ge,meta:{userMustBeUnauthenticated:!0}},{path:"/register",name:"Register",component:ke,meta:{userMustBeUnauthenticated:!0}}]}],vt=new i["a"]({mode:"history",routes:ft});vt.beforeEach((function(e,t,s){e.meta.requiresAuth&&null===k.state.user?s({path:"/auth"}):e.meta.userMustBeUnauthenticated&&k.state.user?s({path:"/"}):s()}));var wt=vt;a["a"].use(i["a"]),a["a"].use(r["a"]),a["a"].use(n["a"]),a["a"].config.productionTip=!1;var _t=new n["a"]({fallbackLocale:"en",dateTimeFormats:g,locale:navigator.languages[0].substr(0,2),messages:h});k.dispatch("checkAuthentication").then((function(e){e&&k.dispatch("getUserAdditionalInfo")})).then((function(){new a["a"]({i18n:_t,router:wt,store:k,render:function(e){return e(C)}}).$mount("#app")}))},"5e48":function(e,t,s){},"601b":function(e,t,s){},"6caa":function(e,t,s){"use strict";var a=s("cd58"),i=s.n(a);i.a},"6cd6":function(e,t,s){e.exports=s.p+"img/404.e38f5272.gif"},"71a9":function(e,t,s){"use strict";var a=s("5e48"),i=s.n(a);i.a},"98b0":function(e,t,s){"use strict";var a=s("cc2b"),i=s.n(a);i.a},b3d7:function(e,t,s){"use strict";var a=s("16b0"),i=s.n(a);i.a},bf1e:function(e,t,s){},cc2b:function(e,t,s){},cd58:function(e,t,s){},d89d:function(e,t,s){"use strict";var a=s("bf1e"),i=s.n(a);i.a},e476:function(e,t,s){"use strict";var a=s("0e0a"),i=s.n(a);i.a},fa3f:function(e,t,s){}});
//# sourceMappingURL=app.e80a1694.js.map